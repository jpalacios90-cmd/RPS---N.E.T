import random

name = input("player name: ")
# initialize stats for the session
stats = {"name": name, "win": 0, "lose": 0}
last_result = None

entrie={
        1:"Rock",
        2: "Paper",
        3:"Scisors"}

def computer_choice():    

    computer=entrie[random.randint(1,3)]
    return computer


def player_choice():
    while True:
        choice = input("""Rock,Paper, Scisors
    1)Rock
    2)Paper
    3)Scisors
Enter choice (or 'q' to quit): """).lower()
        if choice in ("q", "quit", "exit"):
            return None
        if choice:
            return choice
        print("Please enter a valid choice.")


def game_result(computer,choice,entries):
    global last_result

    if choice=="1" or choice== "rock":
        if computer==entries[2]:
            print("You lose")
            last_result = "lose"
        elif computer== entries[3]:
            print("You win")
            last_result = "win"
        else:
            print("Draw")
            last_result = "draw"

    elif choice=="2" or choice== "paper":
        if computer==entries[3]:
            print("You lose")
            last_result = "lose"
        elif computer== entries[1]:
            print("You win")
            last_result = "win"
        else:
            print("Draw")
            last_result = "draw"

    elif choice=="3" or choice== "scisor":
        if computer==entries[1]:
            print("You lose")
            last_result = "lose"
        elif computer== entries[2]:
            print("You win")
            last_result = "win"
        else:
            print("Draw")
            last_result = "draw"

def score():
    """Update and display the running score for the current player session.

    Relies on the global `stats` dict and `last_result` set by `game_result`.
    """
    global stats, last_result
    if last_result == "win":
        stats["win"] += 1
    elif last_result == "lose":
        stats["lose"] += 1
    # always print current stats
    print(f"Player info: {stats}")
    return stats

def main():
    # loop rounds until player quits
    while True:
        player_choice_value = player_choice()
        if player_choice_value is None:
            print("Exiting game. Final stats:")
            print(stats)
            break
        computer = computer_choice()
        print("computer choice is", computer)
        game_result(computer, player_choice_value, entrie)
        score()


main()